(self.webpackChunk=self.webpackChunk||[]).push([[948],{579:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s=(e="API response: succesful",t)=>{const n=`\n    <div class="toast calendar__toast_${t} align-items-center" role="alert" aria-live="assertive" aria-atomic="true">\n      <div class="d-flex">\n        <div class="toast-body">\n          ${e}\n        </div>\n      </div>\n    </div>`,s=document.querySelector(".toast-container"),a=document.createElement("div");a.innerHTML=n;const i=a.firstElementChild;s.appendChild(i);const r=s.lastElementChild;new bootstrap.Toast(r,{animation:!0,autohide:!0,delay:2e3}).show(),setTimeout((()=>{s.firstElementChild.remove()}),2e3)}},555:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var s=n(579);class a extends Error{constructor(e,t){var n,s;super(t),s="FetchError",(n="name")in this?Object.defineProperty(this,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):this.name=s,this.response=e}}window.addEventListener("unhandledrejection",(e=>{e.reason instanceof a&&alert(e.reason.message)}));const i="http://158.101.166.74:8080/api/data",r="yevhenii_zhyrov";class o{static instance(){return this._instance||(this._instance=new o),this._instance}response(e,t){const n=new(0,o.response[e])(t);return n.type=e,n.define=(i=async function(){const e=await fetch(this.url,this.options);if(!e.ok){const t=`Error ${e.status}: ${e.statusText}`;return(0,s.Z)(`API: ${t}`,"error"),console.error(new FetchError(e,t)),e.ok}return this.getTry(e)},async function(...e){let t;try{return t=await i.apply(this,e),t}catch(e){e instanceof TypeError&&console.error(new a(t,e)),setTimeout((()=>{(0,s.Z)(`API: something went wrong with getting ${this.data}`,"error")}),100)}}),n;var i}}var c,l,d;c=o,l="response",d={get:class{constructor(e){this.data=e,this.message=`${e} downloaded`,"users"===e&&(this.url=`${i}/${r}/users`),"events"===e&&(this.url=`${i}/${r}/events`),this.options={method:"GET"}}async getTry(e){const t=await e.json(),n=await t.map((e=>({id:e.id,data:JSON.parse(e.data)})));return setTimeout((()=>(0,s.Z)(`API: ${this.message} succesfully`,"succesful")),100),n}},isTimeSlotEmpty:class{constructor(e){this.data=e,this.url=`${i}/${r}/events`,this.options={method:"GET"}}async getTry(e){const t=await e.json();return null===await t?((0,s.Z)("No data","warning"),!0):!await t.some((e=>JSON.parse(e.data).day===this.data.day&&JSON.parse(e.data).time===this.data.time))||((0,s.Z)("API: This time slot is already occupied. Please choose another day or time","warning"),!1)}},post:class{constructor(e){this.data=e,this.message=`${e} posted`,this.url=`${i}/${r}/events`,this.options={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({data:JSON.stringify(e)})}}async getTry(){(0,s.Z)("API: event posted succesfully","succesful")}},put:class{constructor(e){this.data=e,this.url=`${i}/${r}/events/${e.id}`,this.options={method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({data:JSON.stringify(e.data)})}}async getTry(){(0,s.Z)("API: event changed succesfully","succesful")}},delete:class{constructor(e){this.data=e,this.url=`${i}/${r}/events/`+e,this.options={method:"DELETE"}}async getTry(e){return setTimeout((()=>(0,s.Z)("API: event deleted succesfully","succesful")),100),e.ok}}},l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d;const m=o.instance()},171:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var s=n(579),a=n(555);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r{constructor(e){i(this,"element",void 0),i(this,"start",10),i(this,"end",18),i(this,"duration",1),i(this,"days",["Mon","Tue","Wed","Thu","Fri"]),i(this,"onFormSubmit",(async e=>{e.preventDefault();const t=this.element.querySelectorAll("[data-day]"),n=this.element.querySelectorAll("[data-time]"),i=this.element.querySelectorAll("[data-member]"),r=this.element.querySelector("[data-name]").value,o={};if(o.name=r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),o.day=Object.values(t).find((e=>e.selected)).value,o.time=Object.values(n).find((e=>e.selected)).value,o.members=Object.values(i).filter((e=>e.checked)).reduce(((e,t)=>[...e,{id:t.value}]),[]),o.name.length&&o.members.length||(0,s.Z)("Please fill out all fields","warning"),o.name.length&&o.members.length){const e=await a.Z.response("isTimeSlotEmpty",o);if(await e.define()){const e=await a.Z.response("post",o);await e.define(),setTimeout((()=>{document.location.href="/meeting-planning-calendar/"}),2e3)}}})),this.members=e,this.render()}render(){const e=document.createElement("div");e.innerHTML=this.template;const t=e.firstElementChild;return this.element=t,this.initEventListeners(),this.element}initEventListeners(){this.element.querySelector("#allMembersCheckbox").addEventListener("click",(()=>{[...document.querySelectorAll("[data-member]")].forEach((e=>e.checked=!e.checked))})),this.element.addEventListener("submit",this.onFormSubmit)}get template(){return`\n    <div>\n      <form class='create-event__form'>\n        <div class='create-event__form-element'>\n          <div class='create-event__form-description'>\n            Name of the event\n          </div>\n          <div class='create-event__form-input'>\n          <input\n            placeholder='Type here'\n            type='search'\n            class='form-control'\n            data-name='name'\n          />\n          </div>\n        </div>\n\n        <div class='create-event__form-element'>\n          <div class='create-event__form-description'>\n            Participants\n          </div>\n          ${this.getMembersDropdown()}\n        </div>\n\n        <div class='create-event__form-element'>\n          <div class='create-event__form-description'>\n            Day\n          </div>\n          ${this.getDaysDropdown()}\n        </div>\n\n        <div class='create-event__form-element'>\n          <div class='create-event__form-description'>\n            Time\n          </div>\n          ${this.getEventHoursDropdown()}\n        </div>\n\n        <div class='create-event__form-element'>\n          <button type="submit" class="btn btn-outline-dark create-event__button_create">Create</button>\n        </div>\n\n        <div class='create-event__form-element'>\n          <a href='/meeting-planning-calendar/'>\n            <button type="button" class="btn btn-outline-dark create-event__button_cancel">Cancel</button>\n          </a>\n        </div>\n      </form>\n    </div>`}getMembersDropdown(){return`\n    <div class='create-event__form-input_multiselect'>\n      <div class="form-check">\n        <input class="form-check-input"type="checkbox" id='allMembersCheckbox' value='All members'>\n        <label class="form-check-label" for="allMembersCheckbox">All members</label>\n      </div>\n      ${this.members.map((e=>`\n          <div class="form-check">\n            <input class="form-check-input" class="member" type="checkbox" data-member=${e.id} value=${e.id}>\n            <label class="form-check-label">${e.data.name}</label>\n          </div>`)).join("")}\n    </div>`}getDaysDropdown(){return`\n    <div class='create-event__form-input'>\n      <select class='form-select form-select-lg'>\n        ${this.days.map((e=>`<option data-day='${e}' value='${e}'>${e}</option>`)).join("")}\n      </select>\n    </div>`}getEventHoursDropdown(){return`\n    <div class='create-event__form-input'>\n      <select class='form-select form-select-lg'>\n        ${this.getEventHours()}\n      </select>\n    </div>`}getEventHours(){let e=[];for(let t=this.start;t<=this.end;t+=this.duration)e.push(`<option data-time='${t}'>${t}:00</option>`);return e.join("")}destroy(){this.element.remove()}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c{constructor(){o(this,"element",void 0),o(this,"subElements",{}),o(this,"components",{}),o(this,"users",{})}get template(){return'<div>\n      <div data-element="createEvent">\n        \x3c!-- CreateEvent component --\x3e\n      </div>\n      <div aria-live="polite" aria-atomic="true" class="position-relative">\n        <div class="toast-container position-fixed bottom-0 end-0 p-3">\n          \x3c!-- toast element --\x3e\n        </div>\n      </div>\n    </div>'}async render(){const e=document.createElement("div");e.innerHTML=this.template,this.element=e.firstElementChild,this.subElements=this.getSubElements(this.element);const t=await a.Z.response("get","users");return this.users=await t.define(),this.initComponents(),this.renderComponents(),this.element}getSubElements(e){return[...e.querySelectorAll("[data-element]")].reduce(((e,t)=>(e[t.dataset.element]=t,e)),{})}initComponents(){const e=new r(this.users);this.components.createEvent=e}renderComponents(){Object.keys(this.components).forEach((e=>{const t=this.subElements[e],{element:n}=this.components[e];t.append(n)}))}destroy(){for(const e of Object.values(this.components))e.destroy()}}}}]);
//# sourceMappingURL=create-event-index-js.fb741296d540c719ae53.js.map