{"version":3,"sources":["webpack:///./fixtures-members.js","webpack:///./fixtures-meetings.js","webpack:///./components/userRoles/index.js","webpack:///./components/calendar/index.js","webpack:///./components/logIn-modal/index.js","webpack:///./pages/calendar/index.js"],"names":["id","name","rights","day","time","members","User","constructor","event","chosenMeeting","target","closest","chosenMeetingName","dataset","newMeeting","JSON","parse","localStorage","getItem","filter","item","meeting","setItem","stringify","confirm","remove","this","meetings","sessionUser","sessionStorage","render","wrapper","document","createElement","innerHTML","getTable","element","firstElementChild","renderMeetings","subElements","getSubElements","initEventListeners","querySelectorAll","reduce","accum","subElement","getTableHeader","getTableBody","getTableFooter","getMembersDropdown","getEventButton","membersList","map","member","join","canCreateMeetings","getTableHoursColumn","getTableColumn","a","i","start","end","duration","push","currentRow","querySelector","canDeleteMeetings","deleteButton","button","addEventListener","onRemoveMeetingClick","membersDropdown","chosenMember","value","filterMeetings","clear","window","location","reload","Object","keys","style","visibility","idOfChosenMember","find","filteredMeetings","every","includes","destroy","super","Admin","LogInModal","Page","getMembers","getName","getRights","options","selectedIndex","getAttribute","memberLoggedInData","initComponents","renderComponents","template","getSessionUser","modal","logInModal","bootstrap","Modal","show","onDefineRights","calendar","components","forEach","component","root","append","values"],"mappings":"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","file":"calendar-index-js.d802b61b7667e0349ff4.js","sourcesContent":["const members = [\n  { id: '0001', name: 'Polina', rights: 'admin' },\n  { id: '0002', name: 'Maria', rights: 'user' },\n  { id: '0003', name: 'Bob', rights: 'user' },\n  { id: '0004', name: 'Alex', rights: 'user' },\n];\n\nexport default members;\n","const meetings = [\n  {\n    id: '0000-0000-0000-0001',\n    name: 'Daily Standup',\n    day: 'Mon',\n    time: '11:00',\n    members: [{ id: '0001' }, { id: '0002' }, { id: '0003' }, { id: '0004' }],\n  },\n  {\n    id: '0000-0000-0000-0002',\n    name: 'Annual planning session',\n    day: 'Wed',\n    time: '13:00',\n    members: [{ id: '0001' }, { id: '0002' }],\n  },\n  {\n    id: '0000-0000-0000-0003',\n    name: 'Retrospective',\n    day: 'Fri',\n    time: '17:00',\n    members: [{ id: '0003' }, { id: '0004' }],\n  },\n  {\n    id: '0000-0000-0000-0004',\n    name: 'FE team sync',\n    day: 'Thu',\n    time: '17:00',\n    members: [{ id: '0004' }],\n  },\n  {\n    id: '0000-0000-0000-0005',\n    name: 'Planning session',\n    day: 'Tue',\n    time: '10:00',\n    members: [{ id: '0001' }, { id: '0004' }],\n  },\n];\n\nexport default meetings;\n","import Calendar from '../calendar';\n\nexport class User extends Calendar {\n  constructor() {\n    super();\n  }\n\n  canDeleteMeetings() {\n    return false;\n  }\n\n  canCreateMeetings() {\n    return false;\n  }\n}\n\nexport class Admin extends User {\n  constructor() {\n    super();\n  }\n\n  canDeleteMeetings() {\n    return true;\n  }\n\n  canCreateMeetings() {\n    return true;\n  }\n}\n","export default class Calendar {\n  element; //html element\n  subElements = {};\n  start = 10;\n  end = 18;\n  duration = 1;\n\n  onRemoveMeetingClick = (event) => {\n    const chosenMeeting = event.target.closest('[data-meeting]');\n    const chosenMeetingName = chosenMeeting.dataset.name;\n\n    // new filtered copy of meetings\n    const newMeeting = JSON.parse(localStorage.getItem('meetingsDB')).filter(\n      (item) => item.id !== chosenMeeting.dataset.meeting\n    );\n\n    localStorage.setItem('meetingsDB', JSON.stringify(newMeeting));\n\n    const modal = confirm(\n      `Are you sure you want to delete '${chosenMeetingName}' event?`\n    );\n\n    if (modal) {\n      chosenMeeting.remove();\n    }\n  };\n\n  constructor() {\n    this.meetings = JSON.parse(localStorage.getItem('meetingsDB'));\n    this.members = JSON.parse(localStorage.getItem('membersDB'));\n\n    this.sessionUser = JSON.parse(sessionStorage.getItem('memberLoggedIn'));\n\n    this.render();\n  }\n\n  render() {\n    const wrapper = document.createElement('div');\n    wrapper.innerHTML = this.getTable();\n\n    const element = wrapper.firstElementChild;\n    this.element = element;\n\n    this.renderMeetings(this.meetings);\n\n    this.subElements = this.getSubElements(this.element);\n\n    this.initEventListeners();\n\n    return this.element;\n  }\n\n  getSubElements(element) {\n    const elements = element.querySelectorAll('[data-meeting]');\n\n    return [...elements].reduce((accum, subElement) => {\n      accum[subElement.dataset.meeting] = subElement;\n\n      return accum;\n    }, {});\n  }\n\n  getTable() {\n    return `\n      <div class='calendar'>\n        ${this.getTableHeader()}\n        ${this.getTableBody()}\n        ${this.getTableFooter()}\n      </div>`;\n  }\n\n  getTableFooter() {\n    return `<div class='calendar__footer'>\n      <div>\n        You are logged in as ${this.sessionUser.name} (${this.sessionUser.rights})\n      </div>\n      <button type='button' class='btn btn-outline-secondary' id='logOutButton'>\n        Log out\n      </button>\n    </div>`;\n  }\n\n  getTableHeader() {\n    return `\n      <div class='calendar__header'>\n        <div>\n          <h1>Calendar</h1>\n        </div>\n        <div class='calendar__header_handling'>\n            ${this.getMembersDropdown()}\n            ${this.getEventButton}\n        </div>\n      </div>\n    `;\n  }\n\n  getMembersDropdown() {\n    return `\n    <div class='calendar__header_handling-dropdown'>\n      <select class='form-select form-select-lg' id='membersDropdown'>\n        <option value='All members'>All members</option>\n        ${this.membersList}\n      </select>\n    </div>`;\n  }\n\n  get membersList() {\n    return this.members\n      .map((member) => {\n        return `<option value='${member.name}' data-member='${member.name}'>${member.name}</option>`;\n      })\n      .join('');\n  }\n\n  get getEventButton() {\n    if (this.canCreateMeetings()) {\n      return `\n    <div class='calendar__header_handling-newEventCreatingButton'>\n      <a href='/meeting-planning-calendar/create-event'>\n        <button\n          type='submit'\n          name='newEvent'\n          class='btn btn-outline-dark'\n        >\n        New event +\n        </button>\n      </a>\n    </div>`;\n    }\n\n    return `\n    <div class='calendar__header_handling-newEventCreatingButton'>\n        <button\n          type='submit'\n          name='newEvent'\n          class='btn btn-outline-dark disabled'\n        >\n        New event +\n        </button>\n    </div>`;\n  }\n\n  getTableBody() {\n    return `<div class='calendar__table'>\n      <ul class='calendar__table-column' data-day='Name'>\n        <li class='calendar__table-column-header'>Name</li>\n        ${this.getTableHoursColumn()}\n      </ul>\n\n      <ul class='calendar__table-column' data-day='Mon'>\n        <li class='calendar__table-column-header'>Mon</li>\n        ${this.getTableColumn()}\n      </ul>\n\n      <ul class='calendar__table-column' data-day='Tue'>\n        <li class='calendar__table-column-header'>Tue</li>\n        ${this.getTableColumn()}\n      </ul>\n\n      <ul class='calendar__table-column' data-day='Wed'>\n        <li class='calendar__table-column-header'>Wed</li>\n        ${this.getTableColumn()}\n      </ul>\n\n      <ul class='calendar__table-column' data-day='Thu'>\n        <li class='calendar__table-column-header'>Thu</li>\n        ${this.getTableColumn()}\n      </ul>\n\n      <ul class='calendar__table-column' data-day='Fri'>\n        <li class='calendar__table-column-header'>Fri</li>\n        ${this.getTableColumn()}\n      </ul>\n    </div>`;\n  }\n\n  getTableHoursColumn() {\n    let a = [];\n\n    for (let i = this.start; i <= this.end; i = i + this.duration) {\n      a.push(`<li>${i}:00</li>`);\n    }\n\n    return a.join('');\n  }\n\n  getTableColumn() {\n    let a = [];\n\n    for (let i = this.start; i <= this.end; i = i + this.duration) {\n      a.push(\n        `<li\n          data-time='${i}:00'\n        ></li>`\n      );\n    }\n\n    return a.join('');\n  }\n\n  renderMeetings(meetings) {\n    const arr = [...meetings];\n    arr.map((meeting) => {\n      const currentColumn = this.element.querySelector(\n        `[data-day='${meeting.day}']`\n      );\n      const currentRow = currentColumn.querySelector(\n        `[data-time='${meeting.time}']`\n      );\n\n      if (this.canDeleteMeetings()) {\n        return (currentRow.innerHTML = `\n      <div data-meeting='${meeting.id}' data-name='${meeting.name}' style='visibility: visible'>\n        <a href='/meetings/${meeting.id}' class='calendar__table-column_meeting'>\n          ${meeting.name}\n        </a>\n        <button class='calendar__table-column_meeting_delete' data-delete='delete'>&times;</button>\n      </div>`);\n      }\n\n      return (currentRow.innerHTML = `\n      <div data-meeting='${meeting.id}' data-name='${meeting.name}' style='visibility: visible'>\n        <div class='calendar__table-column_meeting'>\n          ${meeting.name}\n        </div>\n      </div>`);\n    });\n  }\n\n  initEventListeners() {\n    // remove event from calendar\n\n    if (this.canDeleteMeetings()) {\n      const deleteButton = this.element.querySelectorAll('[data-delete]');\n      for (let button of deleteButton) {\n        button.addEventListener('pointerdown', this.onRemoveMeetingClick);\n      }\n    }\n\n    // filter events by team member\n    const membersDropdown = this.element.querySelector('#membersDropdown');\n\n    membersDropdown.addEventListener('change', () => {\n      const chosenMember = membersDropdown.value;\n      this.filterMeetings(chosenMember);\n    });\n\n    // log out from user session\n    const logOutButton = this.element.querySelector('#logOutButton');\n    logOutButton.addEventListener('click', () => {\n      sessionStorage.clear();\n      window.location.reload();\n    });\n  }\n\n  filterMeetings(chosenMember) {\n    if (chosenMember === 'All members') {\n      for (let item of Object.keys(this.subElements)) {\n        this.subElements[item].style.visibility = 'visible';\n      }\n\n      return [...this.meetings];\n    }\n\n    const meetings = [...this.meetings];\n    const members = [...this.members];\n    const idOfChosenMember = members.find(({ name }) => name === chosenMember)\n      .id;\n\n    // get all meetings that must be disabled\n    const filteredMeetings = meetings\n      .filter(({ members }) =>\n        members.every(({ id }) => id !== idOfChosenMember)\n      )\n      .map((item) => item.id);\n\n    // insert style = 'display: visible' into all meetings\n    for (let item of Object.keys(this.subElements)) {\n      this.subElements[item].style.visibility = 'visible';\n    }\n\n    // insert style = 'display: none' into filteredÂ¸ meetings\n    for (let item of filteredMeetings) {\n      if (Object.keys(this.subElements).includes(item)) {\n        this.subElements[item].style.visibility = 'hidden';\n      }\n    }\n\n    return filteredMeetings;\n  }\n\n  destroy() {\n    this.element.remove();\n  }\n}\n","export default class LogInModal {\n  constructor() {\n    this.members = JSON.parse(localStorage.getItem('membersDB'));\n  }\n\n  get template() {\n    return `\n    <div class=\"modal fade modal-dialog\"  id=\"staticBackdrop\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\" id=\"staticBackdropLabel\">Who are You?</h5>\n          </div>\n          <div class=\"modal-body\">\n            <div class='calendar__header_handling-dropdown'>\n              <select class='form-select form-select-lg' id='membersDropdownModal'>\n                ${this.members\n                  .map((member) => {\n                    return `<option value='${member.name}' data-rights='${member.rights}'>${member.name} (${member.rights})</option>`;\n                  })\n                  .join('')}\n              </select>\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" id=\"submitRoleButton\">Confirm</button>\n          </div>\n        </div>\n      </div>\n    </div>`;\n  }\n}\n","import members from '../../fixtures-members';\nimport meetings from '../../fixtures-meetings';\n\nimport { User, Admin } from '../../components/userRoles';\nimport LogInModal from '../../components/logIn-modal';\n\nexport default class Page {\n  element; //html element\n  subElements = {}; //selected elements\n  components = {}; //imported initialized components\n\n  constructor() {\n    if (JSON.parse(localStorage.getItem('meetingsDB')) === null) {\n      localStorage.setItem('meetingsDB', JSON.stringify(meetings));\n    }\n\n    localStorage.setItem('membersDB', JSON.stringify(members));\n  }\n\n  get template() {\n    return `\n      <div>\n        <div data-element=\"calendar\" id=\"calendarPage\">\n          <!-- Calendar component -->\n        </div>\n      </div>\n    `;\n  }\n\n  render() {\n    const element = document.createElement('div');\n    element.innerHTML = this.template;\n\n    this.element = element.firstElementChild;\n    this.subElements = this.getSubElements(this.element);\n\n    const getSessionUser = JSON.parse(sessionStorage.getItem('memberLoggedIn'));\n\n    if (getSessionUser) {\n      this.initComponents(getSessionUser.rights);\n      this.renderComponents();\n\n      return this.element;\n    }\n\n    this.modal();\n\n    return this.element;\n  }\n\n  modal() {\n    const logInModal = new LogInModal();\n    this.element.querySelector('#calendarPage').innerHTML = logInModal.template;\n\n    const myModal = new bootstrap.Modal(\n      this.element.querySelector('#staticBackdrop'),\n      {}\n    );\n\n    myModal.show();\n\n    const submitRoleButton = this.element.querySelector('#submitRoleButton');\n    submitRoleButton.addEventListener('pointerdown', this.onDefineRights);\n  }\n\n  onDefineRights = () => {\n    // set logged in member as default selected member in calendar dropdown\n    const getMembers = this.element.querySelector('#membersDropdownModal');\n\n    const getName = getMembers.value;\n    const getRights = getMembers.options[getMembers.selectedIndex].getAttribute(\n      'data-rights'\n    );\n\n    const memberLoggedInData = { name: getName, rights: getRights };\n\n    // set session user rights\n    sessionStorage.setItem(\n      'memberLoggedIn',\n      JSON.stringify(memberLoggedInData)\n    );\n\n    document.querySelector('#staticBackdrop').remove();\n    document.querySelector('.modal-backdrop').remove();\n\n    this.initComponents(getRights);\n    this.renderComponents();\n  };\n\n  getSubElements(element) {\n    const elements = element.querySelectorAll('[data-element]');\n\n    return [...elements].reduce((accum, subElement) => {\n      accum[subElement.dataset.element] = subElement;\n\n      return accum;\n    }, {});\n  }\n\n  initComponents(rights) {\n    if (rights === 'admin') {\n      const calendar = new Admin();\n      return (this.components.calendar = calendar);\n    }\n\n    const calendar = new User();\n    return (this.components.calendar = calendar);\n  }\n\n  renderComponents() {\n    Object.keys(this.components).forEach((component) => {\n      const root = this.subElements[component];\n      const { element } = this.components[component];\n\n      root.append(element);\n    });\n  }\n\n  destroy() {\n    for (const component of Object.values(this.components)) {\n      component.destroy();\n    }\n  }\n}\n"],"sourceRoot":""}