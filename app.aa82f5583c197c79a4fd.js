(()=>{"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class t{constructor(t,n){e(this,"element",void 0),e(this,"subElements",{}),e(this,"start",10),e(this,"end",18),e(this,"duration",1),e(this,"onRemoveMeetingClick",(e=>{const t=e.target.closest("[data-meeting]"),n=t.dataset.name;confirm(`Are you sure you want to delete '${n}' event?`)&&t.remove()})),this.meetings=n,this.members=t,this.render()}render(){const e=document.createElement("div");e.innerHTML=this.getTable();const t=e.firstElementChild;return this.element=t,this.renderMeetings(),this.subElements=this.getSubElements(this.element),this.initEventListeners(),this.element}getSubElements(e){return[...e.querySelectorAll("[data-meeting]")].reduce(((e,t)=>(e[t.dataset.meeting]=t,e)),{})}getTable(){return`\n      <div class='calendar'>\n        ${this.getTableHeader()}\n        ${this.getTableBody()}\n      </div>`}getTableHeader(){return`\n      <div class='calendar__header'>\n        <div>\n          <h1>Calendar</h1>\n        </div>\n        <div class='calendar__header_handling'>\n            ${this.getMembersDropdown()}\n            ${this.getEventButton}\n        </div>\n      </div>\n    `}getMembersDropdown(){return`\n    <div class='calendar__header_handling-dropdown'>\n      <select class='form-select form-select-lg' id='membersDropdown'>\n        <option selected value='All members'>All members</option>\n        ${this.members.map((e=>`<option value='${e.name}'>${e.name}</option>`)).join("")}\n      </select>\n    </div>`}get getEventButton(){return"\n    <div class='calendar__header_handling-newEventCreatingButton'>\n      <button\n        type='submit'\n        name='newEvent'\n        class='btn btn-outline-dark'\n      >New event +</button>\n    </div>"}getTableBody(){return`<div class='calendar__table'>\n      <ul class='calendar__table-column' data-day='Name'>\n        <li class='calendar__table-column-header'>Name</li>\n        ${this.getTableHoursColumn()}\n      </ul>\n\n      <ul class='calendar__table-column' data-day='Mon'>\n        <li class='calendar__table-column-header'>Mon</li>\n        ${this.getTableColumn()}\n      </ul>\n\n      <ul class='calendar__table-column' data-day='Tue'>\n        <li class='calendar__table-column-header'>Tue</li>\n        ${this.getTableColumn()}\n      </ul>\n\n      <ul class='calendar__table-column' data-day='Wed'>\n        <li class='calendar__table-column-header'>Wed</li>\n        ${this.getTableColumn()}\n      </ul>\n\n      <ul class='calendar__table-column' data-day='Thu'>\n        <li class='calendar__table-column-header'>Thu</li>\n        ${this.getTableColumn()}\n      </ul>\n\n      <ul class='calendar__table-column' data-day='Fri'>\n        <li class='calendar__table-column-header'>Fri</li>\n        ${this.getTableColumn()}\n      </ul>\n    </div>`}getTableHoursColumn(){let e=[];for(let t=this.start;t<=this.end;t+=this.duration)e.push(`<li>${t}:00</li>`);return e.join("")}getTableColumn(){let e=[];for(let t=this.start;t<=this.end;t+=this.duration)e.push(`<li\n          data-time='${t}:00'\n        ></li>`);return e.join("")}renderMeetings(e=this.meetings){[...e].map((e=>this.element.querySelector(`[data-day='${e.day}']`).querySelector(`[data-time='${e.time}']`).innerHTML=`\n      <div data-meeting='${e.id}' data-name='${e.name}' style='visibility: visible'>\n        <a href='/meetings/${e.id}' class='calendar__table-column_meeting'>\n          ${e.name}\n        </a>\n        <button class='calendar__table-column_meeting_delete' data-delete='delete'>&times;</button>\n      </div>`))}initEventListeners(){const e=this.element.querySelectorAll("[data-delete]");for(let t of e)t.addEventListener("pointerdown",this.onRemoveMeetingClick);const t=this.element.querySelector("#membersDropdown");t.addEventListener("change",(()=>{const e=t.value;this.filterMeetings(e)}))}filterMeetings(e="All members"){if("All members"===e){for(let e of Object.keys(this.subElements))this.subElements[e].style.visibility="visible";return[...this.meetings]}const t=[...this.meetings],n=[...this.members].find((({name:t})=>t===e)).id,s=t.filter((({members:e})=>e.every((({id:e})=>e!==n)))).map((e=>e.id));for(let e of Object.keys(this.subElements))this.subElements[e].style.visibility="visible";for(let e of s)Object.keys(this.subElements).includes(e)&&(this.subElements[e].style.visibility="hidden")}}const n=[{id:"0001",name:"Polina"},{id:"0002",name:"Maria"},{id:"0003",name:"Bob"},{id:"0004",name:"Alex"}],s=[{id:"0000-0000-0000-0001",name:"Daily Standup",day:"Mon",time:"11:00",members:[{id:"0001"},{id:"0002"},{id:"0003"},{id:"0004"}]},{id:"0000-0000-0000-0002",name:"Annual planning session",day:"Wed",time:"13:00",members:[{id:"0001"},{id:"0002"}]},{id:"0000-0000-0000-0003",name:"Retrospective",day:"Fri",time:"17:00",members:[{id:"0003"},{id:"0004"}]},{id:"0000-0000-0000-0004",name:"FE team sync",day:"Thu",time:"17:00",members:[{id:"0004"}]},{id:"0000-0000-0000-0005",name:"Planning session",day:"Tue",time:"10:00",members:[{id:"0001"},{id:"0004"}]}];function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l{constructor(){i(this,"element",void 0),i(this,"subElements",{}),i(this,"components",{}),this.render()}get template(){return"\n      <div class='schedule'>\n        <div data-element=\"calendar\">\n          \x3c!-- Calendar component --\x3e\n        </div>\n      </div>\n    "}render(){const e=document.createElement("div");e.innerHTML=this.template,this.element=e.firstElementChild,this.subElements=this.getSubElements(this.element),this.initComponents(),this.renderComponents()}getSubElements(e){return[...e.querySelectorAll("[data-element]")].reduce(((e,t)=>(e[t.dataset.element]=t,e)),{})}initComponents(){const e=new t(n,s);this.components.calendar=e}renderComponents(){Object.keys(this.components).forEach((e=>{const t=this.subElements[e],{element:n}=this.components[e];t.append(n)}))}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r=new class{constructor(){a(this,"element",void 0),a(this,"subElements",{}),a(this,"components",{}),this.render()}get template(){return'\n      <main class=\'main\'>\n        <section class="content" id="content" data-element="content">\n        \n        </section>\n      </main>\n    '}render(){const e=document.createElement("div");e.innerHTML=this.template,this.element=e.firstElementChild,this.subElements=this.getSubElements(this.element),this.initComponents(),this.renderComponents()}getSubElements(e){return[...e.querySelectorAll("[data-element]")].reduce(((e,t)=>(e[t.dataset.element]=t,e)),{})}initComponents(){const e=new l;this.components.content=e}renderComponents(){Object.keys(this.components).forEach((e=>{const t=this.subElements[e],{element:n}=this.components[e];t.append(n)}))}};document.body.append(r.element)})();
//# sourceMappingURL=app.aa82f5583c197c79a4fd.js.map