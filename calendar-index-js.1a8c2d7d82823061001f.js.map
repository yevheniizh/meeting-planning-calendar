{"version":3,"sources":["webpack:///./components/calendar/index.js","webpack:///./fixtures-members.js","webpack:///./fixtures-meetings.js","webpack:///./pages/calendar/index.js"],"names":["Calendar","constructor","event","chosenMeeting","target","closest","chosenMeetingName","dataset","name","newMeeting","JSON","parse","localStorage","getItem","filter","item","id","meeting","setItem","stringify","confirm","remove","this","meetings","members","render","wrapper","document","createElement","innerHTML","getTable","element","firstElementChild","renderMeetings","subElements","getSubElements","initEventListeners","querySelectorAll","reduce","accum","subElement","getTableHeader","getTableBody","getMembersDropdown","getEventButton","map","member","join","getTableHoursColumn","getTableColumn","a","i","start","end","duration","push","querySelector","day","time","deleteButton","button","addEventListener","onRemoveMeetingClick","membersDropdown","chosenMember","value","filterMeetings","Object","keys","style","visibility","idOfChosenMember","find","filteredMeetings","every","includes","destroy","Page","template","initComponents","renderComponents","calendar","components","forEach","component","root","append","values"],"mappings":"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","file":"calendar-index-js.1a8c2d7d82823061001f.js","sourcesContent":["export default class Calendar {\n  element; //html element\n  subElements = {};\n  start = 10;\n  end = 18;\n  duration = 1;\n\n  onRemoveMeetingClick = (event) => {\n    const chosenMeeting = event.target.closest('[data-meeting]');\n    const chosenMeetingName = chosenMeeting.dataset.name;\n\n    // new filtered copy of meetings\n    const newMeeting = JSON.parse(localStorage.getItem('meetingsDB')).filter(\n      (item) => item.id !== chosenMeeting.dataset.meeting\n    );\n\n    localStorage.setItem('meetingsDB', JSON.stringify(newMeeting));\n\n    const modal = confirm(\n      `Are you sure you want to delete '${chosenMeetingName}' event?`\n    );\n\n    if (modal) {\n      chosenMeeting.remove();\n    }\n  };\n\n  constructor() {\n    this.meetings = JSON.parse(localStorage.getItem('meetingsDB'));\n    this.members = JSON.parse(localStorage.getItem('membersDB'));\n\n    this.render();\n  }\n\n  render() {\n    const wrapper = document.createElement('div');\n    wrapper.innerHTML = this.getTable();\n\n    const element = wrapper.firstElementChild;\n    this.element = element;\n\n    this.renderMeetings(this.meetings);\n\n    this.subElements = this.getSubElements(this.element);\n\n    this.initEventListeners();\n\n    return this.element;\n  }\n\n  getSubElements(element) {\n    const elements = element.querySelectorAll('[data-meeting]');\n\n    return [...elements].reduce((accum, subElement) => {\n      accum[subElement.dataset.meeting] = subElement;\n\n      return accum;\n    }, {});\n  }\n\n  getTable() {\n    return `\n      <div class='calendar'>\n        ${this.getTableHeader()}\n        ${this.getTableBody()}\n      </div>`;\n  }\n\n  getTableHeader() {\n    return `\n      <div class='calendar__header'>\n        <div>\n          <h1>Calendar</h1>\n        </div>\n        <div class='calendar__header_handling'>\n            ${this.getMembersDropdown()}\n            ${this.getEventButton}\n        </div>\n      </div>\n    `;\n  }\n\n  getMembersDropdown() {\n    return `\n    <div class='calendar__header_handling-dropdown'>\n      <select class='form-select form-select-lg' id='membersDropdown'>\n        <option selected value='All members'>All members</option>\n        ${this.members\n          .map((member) => {\n            return `<option value='${member.name}'>${member.name}</option>`;\n          })\n          .join('')}\n      </select>\n    </div>`;\n  }\n\n  get getEventButton() {\n    return `\n    <div class='calendar__header_handling-newEventCreatingButton'>\n      <a href='/meeting-planning-calendar/create-event'>\n        <button\n          type='submit'\n          name='newEvent'\n          class='btn btn-outline-dark'\n        >\n        New event +\n        </button>\n      </a>\n    </div>`;\n  }\n\n  getTableBody() {\n    return `<div class='calendar__table'>\n      <ul class='calendar__table-column' data-day='Name'>\n        <li class='calendar__table-column-header'>Name</li>\n        ${this.getTableHoursColumn()}\n      </ul>\n\n      <ul class='calendar__table-column' data-day='Mon'>\n        <li class='calendar__table-column-header'>Mon</li>\n        ${this.getTableColumn()}\n      </ul>\n\n      <ul class='calendar__table-column' data-day='Tue'>\n        <li class='calendar__table-column-header'>Tue</li>\n        ${this.getTableColumn()}\n      </ul>\n\n      <ul class='calendar__table-column' data-day='Wed'>\n        <li class='calendar__table-column-header'>Wed</li>\n        ${this.getTableColumn()}\n      </ul>\n\n      <ul class='calendar__table-column' data-day='Thu'>\n        <li class='calendar__table-column-header'>Thu</li>\n        ${this.getTableColumn()}\n      </ul>\n\n      <ul class='calendar__table-column' data-day='Fri'>\n        <li class='calendar__table-column-header'>Fri</li>\n        ${this.getTableColumn()}\n      </ul>\n    </div>`;\n  }\n\n  getTableHoursColumn() {\n    let a = [];\n\n    for (let i = this.start; i <= this.end; i = i + this.duration) {\n      a.push(`<li>${i}:00</li>`);\n    }\n\n    return a.join('');\n  }\n\n  getTableColumn() {\n    let a = [];\n\n    for (let i = this.start; i <= this.end; i = i + this.duration) {\n      a.push(\n        `<li\n          data-time='${i}:00'\n        ></li>`\n      );\n    }\n\n    return a.join('');\n  }\n\n  renderMeetings(meetings) {\n    const arr = [...meetings];\n    arr.map((meeting) => {\n      const currentColumn = this.element.querySelector(\n        `[data-day='${meeting.day}']`\n      );\n      const currentRow = currentColumn.querySelector(\n        `[data-time='${meeting.time}']`\n      );\n\n      return (currentRow.innerHTML = `\n      <div data-meeting='${meeting.id}' data-name='${meeting.name}' style='visibility: visible'>\n        <a href='/meetings/${meeting.id}' class='calendar__table-column_meeting'>\n          ${meeting.name}\n        </a>\n        <button class='calendar__table-column_meeting_delete' data-delete='delete'>&times;</button>\n      </div>`);\n    });\n  }\n\n  initEventListeners() {\n    //remove event from calendar\n    const deleteButton = this.element.querySelectorAll('[data-delete]');\n    for (let button of deleteButton) {\n      button.addEventListener('pointerdown', this.onRemoveMeetingClick);\n    }\n\n    //filter events by team member\n    const membersDropdown = this.element.querySelector('#membersDropdown');\n\n    membersDropdown.addEventListener('change', () => {\n      const chosenMember = membersDropdown.value;\n      this.filterMeetings(chosenMember);\n    });\n  }\n\n  filterMeetings(chosenMember = 'All members') {\n    if (chosenMember === 'All members') {\n      for (let item of Object.keys(this.subElements)) {\n        this.subElements[item].style.visibility = 'visible';\n      }\n\n      return [...this.meetings];\n    }\n\n    const meetings = [...this.meetings];\n    const members = [...this.members];\n    const idOfChosenMember = members.find(({ name }) => name === chosenMember)\n      .id;\n\n    // get all meetings that must be disabled\n    const filteredMeetings = meetings\n      .filter(({ members }) =>\n        members.every(({ id }) => id !== idOfChosenMember)\n      )\n      .map((item) => item.id);\n\n    // insert style = 'display: visible' into all meetings\n    for (let item of Object.keys(this.subElements)) {\n      this.subElements[item].style.visibility = 'visible';\n    }\n\n    // insert style = 'display: none' into filteredÂ¸ meetings\n    for (let item of filteredMeetings) {\n      if (Object.keys(this.subElements).includes(item)) {\n        this.subElements[item].style.visibility = 'hidden';\n      }\n    }\n  }\n\n  destroy() {\n    this.element.remove();\n  }\n}\n","const members = [\n  { id: '0001', name: 'Polina' },\n  { id: '0002', name: 'Maria' },\n  { id: '0003', name: 'Bob' },\n  { id: '0004', name: 'Alex' },\n];\n\nexport default members;\n","const meetings = [\n  {\n    id: '0000-0000-0000-0001',\n    name: 'Daily Standup',\n    day: 'Mon',\n    time: '11:00',\n    members: [{ id: '0001' }, { id: '0002' }, { id: '0003' }, { id: '0004' }],\n  },\n  {\n    id: '0000-0000-0000-0002',\n    name: 'Annual planning session',\n    day: 'Wed',\n    time: '13:00',\n    members: [{ id: '0001' }, { id: '0002' }],\n  },\n  {\n    id: '0000-0000-0000-0003',\n    name: 'Retrospective',\n    day: 'Fri',\n    time: '17:00',\n    members: [{ id: '0003' }, { id: '0004' }],\n  },\n  {\n    id: '0000-0000-0000-0004',\n    name: 'FE team sync',\n    day: 'Thu',\n    time: '17:00',\n    members: [{ id: '0004' }],\n  },\n  {\n    id: '0000-0000-0000-0005',\n    name: 'Planning session',\n    day: 'Tue',\n    time: '10:00',\n    members: [{ id: '0001' }, { id: '0004' }],\n  },\n];\n\nexport default meetings;\n","import Calendar from '../../components/calendar/index.js';\nimport members from '../../fixtures-members';\nimport meetings from '../../fixtures-meetings';\n\nexport default class Page {\n  element; //html element\n  subElements = {}; //selected elements\n  components = {}; //imported initialized components\n\n  get template() {\n    return `\n      <div class='schedule'>\n        <div data-element=\"calendar\">\n          <!-- Calendar component -->\n        </div>\n      </div>\n    `;\n  }\n\n  render() {\n    const element = document.createElement('div');\n    element.innerHTML = this.template;\n\n    this.element = element.firstElementChild;\n    this.subElements = this.getSubElements(this.element);\n\n    this.initComponents();\n\n    this.renderComponents();\n\n    return this.element;\n  }\n\n  getSubElements(element) {\n    const elements = element.querySelectorAll('[data-element]');\n\n    return [...elements].reduce((accum, subElement) => {\n      accum[subElement.dataset.element] = subElement;\n\n      return accum;\n    }, {});\n  }\n\n  initComponents() {\n    if (JSON.parse(localStorage.getItem('meetingsDB')) === null) {\n      localStorage.setItem('meetingsDB', JSON.stringify(meetings));\n    }\n\n    localStorage.setItem('membersDB', JSON.stringify(members));\n\n    const calendar = new Calendar();\n    this.components.calendar = calendar;\n  }\n\n  renderComponents() {\n    Object.keys(this.components).forEach((component) => {\n      const root = this.subElements[component];\n      const { element } = this.components[component];\n\n      root.append(element);\n    });\n  }\n\n  destroy() {\n    for (const component of Object.values(this.components)) {\n      component.destroy();\n    }\n  }\n}\n"],"sourceRoot":""}